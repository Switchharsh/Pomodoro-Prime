<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A simple, distraction-free Pomodoro timer for focused work sessions">
    <meta name="theme-color" content="#2D5A27">
    <title>Pomodoro Prime - Forest Focus Timer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Sky Canvas for Day/Night Cycle -->
    <canvas id="skyCanvas" class="sky-canvas"></canvas>
    
    <!-- Floating Particles Canvas -->
    <canvas id="particlesCanvas" class="particles-canvas"></canvas>
    
    <div class="container">
        <header class="header">
            <div class="header-top">
                <h1 class="title">üå≤ Pomodoro Prime</h1>
                <div class="header-controls">
                    <button class="icon-btn" id="settingsBtn" aria-label="Settings">
                        <span>‚öôÔ∏è</span>
                    </button>
                    <button class="icon-btn" id="shortcutsBtn" aria-label="Keyboard shortcuts">
                        <span>‚å®Ô∏è</span>
                    </button>
                    <button class="icon-btn" id="themeToggle" aria-label="Toggle theme">
                        <span class="theme-icon">üåô</span>
                    </button>
                </div>
            </div>
            <p class="subtitle">Stay focused, take breaks, repeat</p>
        </header>

        <main class="main">
            <!-- Timer Display -->
            <section class="timer-section">
                <div class="timer-type" id="timerType">Focus</div>
                <div class="timer-display" id="timerDisplay">25:00</div>
                
                <!-- Timer Info -->
                <div class="timer-info">
                    <div class="timer-stat">
                        <span class="timer-stat-label">Progress</span>
                        <span class="timer-stat-value" id="progressPercent">0%</span>
                    </div>
                    <div class="timer-stat">
                        <span class="timer-stat-label">Elapsed</span>
                        <span class="timer-stat-value" id="timeElapsed">0:00</span>
                    </div>
                    <div class="timer-stat">
                        <span class="timer-stat-label">Remaining</span>
                        <span class="timer-stat-value" id="timeRemaining">25:00</span>
                    </div>
                </div>
                
                <div class="timer-progress">
                    <div class="progress-ring" id="progressRing">
                        <svg class="progress-svg" viewBox="0 0 100 100">
                            <circle class="progress-bg" cx="50" cy="50" r="45" fill="none" stroke-width="6"/>
                            <circle class="progress-bar" id="progressBar" cx="50" cy="50" r="45" fill="none" stroke-width="6"
                                stroke-dasharray="283" stroke-dashoffset="0"/>
                            <!-- Celestial Body (Sun/Moon) inside timer ring -->
                            <g id="celestialBody" class="celestial-body">
                                <circle id="celestialCircle" cx="50" cy="50" r="8" fill="currentColor"/>
                            </g>
                        </svg>
                    </div>
                </div>
                
                <!-- Cycle Indicator -->
                <div class="cycle-indicator">
                    <span id="currentCycle">1/4</span>
                </div>

                <!-- Task Input -->
                <div class="task-input">
                    <input type="text" id="taskInput" placeholder="What are you working on?" 
                           maxlength="60" aria-label="Current task">
                </div>

                <!-- Controls -->
                <div class="controls">
                    <button class="btn btn-primary" id="startBtn" aria-label="Start timer">
                        <span class="btn-icon">‚ñ∂</span>
                        <span class="btn-text">Start</span>
                    </button>
                    <button class="btn btn-secondary" id="resetBtn" aria-label="Reset timer">
                        <span class="btn-icon">‚Ü∫</span>
                        <span class="btn-text">Reset</span>
                    </button>
                    <button class="btn btn-secondary" id="skipBtn" aria-label="Skip to next mode">
                        <span class="btn-icon">‚è≠</span>
                        <span class="btn-text">Skip</span>
                    </button>
                </div>

                <!-- Mode Toggle -->
                <div class="mode-toggle">
                    <button class="mode-btn active" data-mode="focus" aria-label="Focus mode">
                        <span class="mode-icon">üå≥</span>
                        <span class="mode-label">Focus</span>
                    </button>
                    <button class="mode-btn" data-mode="short" aria-label="Short break mode">
                        <span class="mode-icon">üåø</span>
                        <span class="mode-label">Short Break</span>
                    </button>
                    <button class="mode-btn" data-mode="long" aria-label="Long break mode">
                        <span class="mode-icon">üçÉ</span>
                        <span class="mode-label">Long Break</span>
                    </button>
                </div>

                <!-- Timer Presets -->
                <div class="presets-container">
                    <h3 class="presets-title">Quick Presets</h3>
                    <div class="presets-buttons">
                        <button class="preset-btn" data-minutes="15">15m</button>
                        <button class="preset-btn" data-minutes="25">25m</button>
                        <button class="preset-btn" data-minutes="45">45m</button>
                        <button class="preset-btn" data-minutes="60">60m</button>
                    </div>
                    <div class="custom-duration">
                        <input type="number" id="customMinutes" min="1" max="120" placeholder="Custom" 
                               aria-label="Custom duration in minutes">
                        <button class="btn-small" id="customDurationBtn">Set</button>
                    </div>
                </div>
            </section>

            <!-- Task Management -->
            <section class="tasks-section">
                <h2 class="section-title">üìã Tasks</h2>
                <div class="task-input-group">
                    <input type="text" id="newTaskInput" placeholder="Add a new task..." 
                           maxlength="100" aria-label="New task">
                    <button class="btn-small" id="addTaskBtn">Add</button>
                </div>
                <ul class="task-list" id="taskList">
                    <!-- Tasks will be dynamically added here -->
                </ul>
            </section>

            <!-- Statistics Section -->
            <section class="stats-section">
                <h2 class="stats-title">üìä Today's Progress</h2>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="statPomodoros">0</div>
                        <div class="stat-label">Pomodoros</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="statFocusTime">0m</div>
                        <div class="stat-label">Focus Time</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="statStreak">0</div>
                        <div class="stat-label">Day Streak</div>
                    </div>
                </div>
            </section>

            <!-- Sound Settings -->
            <section class="sound-section">
                <h2 class="sound-title">üîä Sound Settings</h2>
                <div class="sound-controls">
                    <div class="sound-option">
                        <label class="sound-label">Volume</label>
                        <input type="range" id="volumeSlider" min="0" max="100" value="50" class="volume-slider">
                    </div>
                    <div class="sound-option">
                        <label class="sound-label">Alarm Sound</label>
                        <div class="sound-buttons">
                            <button class="sound-btn active" data-sound="chime">üîî Chime</button>
                            <button class="sound-btn" data-sound="birds">üê¶ Birds</button>
                            <button class="sound-btn" data-sound="rain">üåßÔ∏è Rain</button>
                            <button class="sound-btn" data-sound="stream">üíß Stream</button>
                        </div>
                    </div>
                    <div class="sound-option">
                        <label class="toggle-label">
                            <input type="checkbox" id="ambientSoundToggle">
                            <span>Ambient Sounds</span>
                        </label>
                    </div>
                    <button class="test-sound-btn" id="testSoundBtn">üéµ Test Sound</button>
                </div>
            </section>

            <!-- Theme Settings -->
            <section class="theme-section">
                <h2 class="theme-title">üé® Theme</h2>
                <div class="theme-buttons">
                    <button class="theme-option active" data-theme="forest">
                        <span class="theme-emoji">üå≤</span>
                        <span class="theme-name">Forest</span>
                    </button>
                    <button class="theme-option" data-theme="ocean">
                        <span class="theme-emoji">üåä</span>
                        <span class="theme-name">Ocean</span>
                    </button>
                    <button class="theme-option" data-theme="mountain">
                        <span class="theme-emoji">üèîÔ∏è</span>
                        <span class="theme-name">Mountain</span>
                    </button>
                    <button class="theme-option" data-theme="space">
                        <span class="theme-emoji">üåå</span>
                        <span class="theme-name">Space</span>
                    </button>
                </div>
                <div class="theme-option">
                    <label class="toggle-label">
                        <input type="checkbox" id="highContrastToggle">
                        <span>High Contrast</span>
                    </label>
                </div>
            </section>

            <!-- Advanced Options -->
            <section class="options-section">
                <h2 class="options-title">‚öôÔ∏è Options</h2>
                <div class="options-list">
                    <label class="toggle-label">
                        <input type="checkbox" id="autoStartToggle">
                        <span>Auto-start next timer</span>
                    </label>
                    <label class="toggle-label">
                        <input type="checkbox" id="skipBreaksToggle">
                        <span>Skip breaks</span>
                    </label>
                    <label class="toggle-label">
                        <input type="checkbox" id="tickSoundToggle">
                        <span>Tick sound every minute</span>
                    </label>
                </div>
            </section>

            <!-- Quick Tips -->
            <section class="tips-section">
                <h2 class="tips-title">üå± Quick Tips</h2>
                <ul class="tips-list">
                    <li>Grow one habit at a time</li>
                    <li>Nurture your focus zone</li>
                    <li>Root out distractions</li>
                    <li>Breathe deep like the forest</li>
                </ul>
            </section>
        </main>
    </div>

    <!-- Onboarding Modal -->
    <div class="modal" id="onboardingModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Welcome to Pomodoro Prime! üå≤</h2>
                <button class="modal-close" id="closeOnboarding">‚úï</button>
            </div>
            <div class="modal-body">
                <p class="modal-text">Your journey to focused productivity starts here. Here's how to get started:</p>
                <div class="onboarding-steps">
                    <div class="step">
                        <span class="step-number">1</span>
                        <p class="step-text">Choose your focus time and click <strong>Start</strong></p>
                    </div>
                    <div class="step">
                        <span class="step-number">2</span>
                        <p class="step-text">Work until the timer ends (watch the day/night cycle!)</p>
                    </div>
                    <div class="step">
                        <span class="step-number">3</span>
                        <p class="step-text">Take a short break, then repeat</p>
                    </div>
                    <div class="step">
                        <span class="step-number">4</span>
                        <p class="step-text">After 4 pomodoros, enjoy a long break!</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" id="startJourneyBtn">Start My Journey</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Keyboard Shortcuts Modal -->
    <div class="modal" id="shortcutsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">‚å®Ô∏è Keyboard Shortcuts</h2>
                <button class="modal-close" id="closeShortcuts">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="shortcuts-list">
                    <div class="shortcut-item">
                        <kbd class="key">Space</kbd>
                        <span class="shortcut-desc">Start / Pause timer</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd class="key">R</kbd>
                        <span class="shortcut-desc">Reset timer</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd class="key">T</kbd>
                        <span class="shortcut-desc">Toggle dark/light mode</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd class="key">S</kbd>
                        <span class="shortcut-desc">Skip to next mode</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd class="key">Esc</kbd>
                        <span class="shortcut-desc">Close modals</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
